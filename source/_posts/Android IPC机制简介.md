---
title:  "Android IPC机制简介"
date: 2017-07-26 14:47:01
categories: [Android,IPC]
tags: [Android]
---

![](http://ot0nm27pk.bkt.clouddn.com/android_ipc_01.jpg) 

#### IPC是什么

IPC是Inter-Process Communication缩写,含义为进程间通信. 按照操作系统中的描述,线程是cpu调度的最小单元,而进程一般指一个执行单元. 进程中可以有一个或者多个线程.

不同的操作系统有着不同的IPC机制:

- Windows: 通过剪切板, 管道, 信号量来进行进程间通信
- Linux: 通过命名管道, 共享内存, 信号量等来进行进行进程间通信
- android: 虽然基于Linux内核,但是使用了独有的Binder机制, 也可以Socket进行通信


#### 这里解释一下定义（来自百度百科）

- 剪切板：
剪切板是指windows 操作系统提供的一个暂存数据，并且提供共享的一个模块。也称为数据中转站，剪切板在后台起作用，在内存里.，是操作系统设置的一段存储区域，你是在硬盘里找不到的.你只要有文本输入的地方按CTRL+V或右键粘贴就出现了，.新的内容送到剪切板后，将覆盖旧内容。
- 管道：
管道是两个头的东西，每个头各连接一个进程或者同一个进程的不同代码，按照管道的类别分有两种管道，匿名的和命名的；按照管道的传输方向分也可以分成两种，单向的双向的。根据管道的特点，命名管道通常用在网络环境下不同计算机上运行的进程之间的通信（当然也可以用在同一台机的不同进程中）它可以是单向或双向的；而匿名管道只能用在同一台计算机中，它只能是单向的。匿名管道其实是通过用给了一个指定名字的有名管道来实现的。
使用管道的好处在于：读写它使用的是对文件操作的 api，结果操作管道就和操作文件一样。即使你在不同的计算机之间用命名管道来通信，你也不必了解和自己去实现网络间通信的具体细节。
- 信号量
信号量(Semaphore)，有时被称为信号灯，是在多线程环境下使用的一种设施，是可以用来保证两个或多个关键代码段不被并发调用。在进入一个关键代码段之前，线程必须获取一个信号量；一旦该关键代码段完成了，那么该线程必须释放信号量。其它想进入该关键代码段的线程必须等待直到第一个线程释放信号量。为了完成这个过程，需要创建一个信号量VI，然后将Acquire Semaphore VI以及Release Semaphore VI分别放置在每个关键代码段的首末端。确认这些信号量VI引用的是初始创建的信号量。
- 共享内存
共享内存是进程间通信中最简单的方式之一。共享内存允许两个或更多进程访问同一块内存，就如同 malloc() 函数向不同进程返回了指向同一个物理内存区域的指针。当一个进程改变了这块地址中的内容的时候，其它进程都会察觉到这个更改。因为所有进程共享同一块内存，共享内存在各种进程间通信方式中具有最高的效率。


使用场景: 
可能有些模块因为特殊原因需要运行在单独的进程中; 或者为了加大一个应用可使用的内存; 又或者我们需要去另外一个进程去获取数据,必然需要跨进程.